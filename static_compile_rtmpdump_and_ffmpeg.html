<!DOCTYPE html>
<html lang="zh">

  <head>
    <title>光明顶</title>
     <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/webfont/1.3.0/webfont.js"></script>
      <link rel="stylesheet" type="text/css" href="http://blog.hhyue.com/theme/css/icons.css"/>
      <link rel="stylesheet" type="text/css" href="http://blog.hhyue.com/theme/css/styles.css"/>
      <meta charset="utf-8" />
  </head>

  <body id="index">
    <!-- header -->
    <header class="siteheader">
      <!-- site image -->

      <div class = "sitebanner">
        <h1><a class="sitetitle nodec" href="http://blog.hhyue.com">光明顶</a></h1>
        <h3 class ="sitesubtitle"></h3>
        <!-- nav -->
        <nav class="menu">
          <ul>
            <!-- menu items-->
            <!--pages-->
            <!-- services icons -->
              <li><a class="nodec icon-github" href="https://github.com/YueHonghui"></a></li>
              <li><a class="nodec icon-bitbucket" href="https://bitbucket.org/YueHonghui"></a></li>
          </ul>
        </nav>
      </div> <!-- sitebanner -->
    </header>

    <!-- content -->

<section class="content">

  <h3 class="posttitle">
    <a class="nodec" href="/static_compile_rtmpdump_and_ffmpeg.html" rel="bookmark" title="Permalink to 静态编译rtmpdump+ffmpeg">
      静态编译rtmpdump+ffmpeg
    </a>
  </h3>

  <div class="postinfo">
    <p class="published" title="2013-08-03T20:20:00">
      2013-08-03 20:20:00
    </p>

  </div><!-- .postinfo -->

  <div class="article">
    <p>废话不多说, 直接上编译脚本, debian 7.1 amd64上测试通过:</p>
<div class="highlight"><pre>BUILD_DIR=<span class="nv">$HOME</span>/work/ffmpeg/build
BIN_DIR=<span class="nv">$HOME</span>/work/ffmpeg/bin

#zlib
wget http://zlib.net/zlib-1.2.8.tar.gz
tar -zxvf zlib-1.2.8.tar.gz
cd zlib-1.2.8
./configure --prefix=<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span> --static
make -j2
make install
cd ..

#openssl
wget http://www.openssl.org/source/openssl-1.0.1e.tar.gz
tar -zxvf openssl-1.0.1e.tar.gz
cd openssl-1.0.1e
./config --prefix=<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span> --openssldir=<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span>/openssl no-shared zlib
make -j2
make install
cd ..

#rtmpdump
wget http://rtmpdump.mplayerhq.hu/download/rtmpdump-2.3.tgz
tar -zxvf rtmpdump-2.3.tgz
cd rtmpdump-2.3
make prefix=<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span> SYS=posix SHARED= XLDFLAGS=-L<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span>/lib XLIBS=-  ldl
make install prefix=<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span> SYS=posix SHARED= XLDFLAGS=-L<span class="cp">${</span><span class="n">BUILD_DIR</span><span class="cp">}</span>/lib XLIBS=-ldl
cd ..

#yasm
wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz yasm-1.2.0.tar.gz
tar -zxvf yasm-1.2.0.tar.gz
cd yasm-1.2.0
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --bindir=&quot;<span class="nv">$BIN_DIR</span>&quot;
make -j2
make install
make distclean
export PATH=<span class="cp">${</span><span class="n">BIN_DIR</span><span class="cp">}</span>:<span class="cp">${</span><span class="n">PATH</span><span class="cp">}</span>
#. ~/.bash_profile
cd ..

#x264
git clone --depth 1 git://git.videolan.org/x264.git
cd x264
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --bindir=&quot;<span class="nv">$BIN_DIR</span>&quot; --enable-static
make -j2
make install-lib-static
make distclean
cd ..

#fdk_aac
git clone --depth 1 git://github.com/mstorsjo/fdk-aac.git
cd fdk-aac
automake --add-missing
autoreconf -fiv
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --disable-shared
make -j2
make install
make distclean
cd ..

#mp3lame
wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz lame-    3.99.5.tar.gz
tar xzvf lame-3.99.5.tar.gz
cd lame-3.99.5
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --bindir=&quot;<span class="nv">$BIN_DIR</span>&quot; --disable-shared --enable-nasm
make -j2
make install
make distclean
cd ..

#opus
wget http://downloads.xiph.org/releases/opus/opus-1.0.2.tar.gz
tar -zxvf opus-1.0.2.tar.gz
cd opus-1.0.2
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --disable-shared
make -j2
make install
make distclean
cd ..

#ogg
wget http://downloads.xiph.org/releases/ogg/libogg-1.3.1.tar.gz
tar -zxvf libogg-1.3.1.tar.gz
cd libogg-1.3.1
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --disable-shared
make -j2
make install
make distclean
cd ..

#vorbis
wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz
tar -zxvf libvorbis-1.3.3.tar.gz
cd libvorbis-1.3.3
./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --with-ogg=&quot;<span class="nv">$BUILD_DIR</span>&quot; --disable-shared
make -j2
make install
make distclean
cd ..

#vpx
#git clone --depth 1 http://git.chromium.org/webm/libvpx.git
#cd libvpx
#./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --disable-examples
#make -j2
#make install
#make clean

#ffmpeg
wget http://www.ffmpeg.org/releases/ffmpeg-1.2.3.tar.gz
tar -zxvf ffmpeg-1.2.3.tar.gz
cd ffmpeg-1.2.3
PKG_CONFIG_PATH=&quot;<span class="nv">$BUILD_DIR</span>/lib/pkgconfig&quot; ./configure --prefix=&quot;<span class="nv">$BUILD_DIR</span>&quot; --extra-cflags=&quot;-I<span class="nv">$BUILD_DIR</span>/include&quot; --extra-ldflags=&quot;-L<span class="nv">$BUILD_DIR</span>/lib&quot; --bindir=&quot;<span class="nv">$BIN_DIR</span>&quot; --extra-libs=&quot;-ldl&quot; --enable-gpl --enable-nonfree --enable-libfdk_aac --enable-libmp3lame --enable-libopus --enable-libvorbis --enable-libx264 --enable-librtmp
make -j2
make install
hash -r
#. ~/.bash_profile
</pre></div>
  </div><!-- .content -->

</section>


    <!-- footer -->
    <footer>
      <p>
        © hhyue, license <a href=""> </a>
        unless otherwise noted.
        Generated by <a href= "http://docs.getpelican.com/">Pelican</a> with
        <a href="http://github.com/porterjamesj/crowsfoot">crowsfoot</a> theme.
      </p>
    </footer>
  </body>
</html>